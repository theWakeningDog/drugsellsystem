<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sellsystem.dao.UserDao">
    <sql id="createUserSQL">
        createUser.id createUserId, createUser.name createUserName, createUser.password createUserPassword,
        createUser.age createUserAge, createUser.tel createUserTel, createUser.email createUserEmail, createUser.longitude createUserLongitude,
        createUser.latitude createUserLatitude, createUser.createTime createUserCreateTime, createUser.remark createUserRemark, createUser.isDelete createUserIsDelete
    </sql>
    <resultMap id="createUserResult" type="User">
        <id property="id" column="createUserId"/>
        <result property="name" column="createUserName"/>
        <result property="password" column="createUserPassword"/>
        <result property="age" column="createUserAge"/>
        <result property="tel" column="createUserTel"/>
        <result property="email" column="createUserEmail"/>
        <result property="longitude" column="createUserLongitude"/>
        <result property="latitude" column="createUserLatitude"/>
        <result property="createTime" column="createUserCreateTime"/>
        <result property="remark" column="createUserRemark"/>
        <result property="isDelete" column="createUserIsDelete"/>
    </resultMap>

    <sql id="userSQL">
        user.id userId, user.name userName, user.password userPassword, user.age userAge, user.tel userTel, user.email userEmail,
        user.longitude userLongitude, user.latitude userLatitude,user.createTime userCreateTime, user.remark userRemark, user.isDelete userIsDelete
    </sql>
    <resultMap id="userResult" type="User">
        <id property="id" column="userId"/>
        <result property="name" column="userName"/>
        <result property="password" column="userPassword"/>
        <result property="age" column="userAge"/>
        <result property="tel" column="userTel"/>
        <result property="email" column="userEmail"/>
        <result property="longitude" column="userLongitude"/>
        <result property="latitude" column="userLatitude"/>
        <result property="createTime" column="userCreateTime"/>
        <result property="remark" column="userRemark"/>
        <result property="isDelete" column="userIsDelete"/>
    </resultMap>

    <select id="getList" resultMap="customerResult">
        select
        <include refid="userSQL"/>
        from user user
    </select>

    <select id="getUser" resultMap="userResult">
        select
        <include refid="userSQL"/>
        from user user
        where user.id = #{userId}
    </select>

    <insert id="create">
        <selectKey keyProperty="user.id" resultType="java.lang.String" order="BEFORE">
            select uuid()
        </selectKey>
        insert into user values (#{user.id}, #{user.name}, #{user.password}, #{user.age}, #{user.tel},
        #{user.email}, #{user.longitude}, #{user.latitude}, #{user.createTime}, #{user.remark}, #{user.isDelete});
    </insert>

    <update id="update">
        update task
        <set>
            <if test="user.id != null">id = #{user.id},</if>
            <if test="user.name != null">name = #{user.name},</if>
            <if test="user.password != null">password = #{user.password},</if>
            <if test="user.age != null">age = #{user.age},</if>
            <if test="user.tel != null">tel = #{user.tel},</if>
            <if test="user.email != null">email = #{user.email},</if>
            <if test="user.longitude != null">longitude = #{user.longitude},</if>
            <if test="user.latitude != null">latitude = #{user.latitude},</if>
            <if test="user.createTime != null">createTime = #{user.createTime},</if>
            <if test="user.remark != null">remark = #{user.remark}</if>
            <if test="user.isDelete != null">isDelete = #{user.isDelete}</if>
        </set>
    </update>

    <delete id="delete">
        delete from user where id in
        <foreach collection="userIdList" item="userId" index="index" open="(" separator="," close=")">
            #{userId}
        </foreach>
    </delete>
</mapper>